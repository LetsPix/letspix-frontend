<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>LetsPix - Log-In</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" 
	integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" 
	crossorigin="anonymous">
	<link rel="icon" type="image/x-icon" href="./images/Letspix-icon.png">
	<link rel="stylesheet" href="./style/index.css">
</head>
<body>
	<div id="login_container">
        <div id="login_info_container" >
            <h1>Sign In</h1>
            <input type="email" id="email_login" placeholder="Email" >
            <br>
            <input type="password" id="password_login" placeholder="Password">
            <br>
            <button id="login_button" >Sign In</button>
            <p>Forgot your password? Sorry. There's no forgotten passwords page yet.</p>
            <div class="line"></div>
            <p>Don't have an account? <a href="signup.html">Register Here.</a></p>
        </div>
    </div>
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.20.0/firebase-app.js";
      import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } 
      from "https://www.gstatic.com/firebasejs/9.20.0/firebase-auth.js";
      import { getDatabase} from "https://www.gstatic.com/firebasejs/9.20.0/firebase-database.js";
  
      // Your web app's Firebase configuration
      const firebaseConfig = {
      apiKey: "AIzaSyBPEu118kxD5PHGS99ri5MlqZQ9PVUbqbg",
      authDomain: "letspix-users.firebaseapp.com",
      projectId: "letspix-users",
      storageBucket: "letspix-users.appspot.com",
      messagingSenderId: "494666586548",
      appId: "1:494666586548:web:cb38808aa74554aa997ae1"
    };
    
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      var auth = getAuth(app);
      var database = getDatabase(app);

      const signinbutton = document.querySelector('#login_button')

      const signIn = async() => {
        console.log('REGISTER INITIATED')
        // retrieve registration info
        const email = document.getElementById('email_login').value
        const password = document.getElementById('password_login').value
        // Authentication
        signInWithEmailAndPassword(auth,email,password)
        .then(function(){
        // user object
        var user = auth.currentUser
        alert('Signed In')
        window.location.href = "account.html";
        })
        .catch(function(error){
            // firebase errors
            var errorCode = error.error_code
            var errorMessage = error.message
            alert(errorMessage)
        })
      }
      signinbutton.addEventListener('click',signIn)
    </script>
  <script src="index.js"></script>
</body>
</html>